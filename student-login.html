<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login / Sign Up | Student Info Board</title>
<style>
/* ===== GENERAL ===== */
body {
  font-family: 'Segoe UI', Arial, sans-serif;
  background: #f0f4f0;
  margin: 0; padding: 0;
}

/* ===== NAVBAR ===== */
.navbar {
  background: #316600;
  color: #fff;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
}
.navbar .logo {
  font-weight: bold;
  font-size: 20px;
}
.nav-links {
  display: flex; gap: 15px;
}
.nav-links a {
  color: #fff;
  text-decoration: none;
  font-size: 16px;
}
.nav-links a:hover {
  text-decoration: underline;
}
.menu-toggle {
  display: none;
  background: none;
  border: none;
  color: white;
  font-size: 24px;
  cursor: pointer;
}
@media (max-width:768px){
  .menu-toggle { display: block; }
  .nav-links { 
    display: none;
    position: absolute;
    right: 15px;
    top: 60px;
    background: #316600;
    flex-direction: column;
    border-radius: 6px;
    padding: 10px;
  }
  .nav-links.show { display: flex; }
}

/* ===== AUTH CONTAINER ===== */
.auth-container {
  max-width: 420px;
  margin: 60px auto;
  background: #fff;
  border-radius: 15px;
  padding: 40px 35px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

/* Toggle buttons */
.auth-toggle {
  display: flex; justify-content: center; gap: 10px;
  margin-bottom: 25px;
}
.auth-toggle button {
  padding: 10px 25px;
  border: none;
  border-radius: 25px;
  background-color: #e5e5e5;
  color: #333;
  cursor: pointer;
  font-weight: bold;
  transition: 0.3s;
}
.auth-toggle button.active {
  background-color: #316600;
  color: #fff;
}

/* ===== FORM ===== */
.auth-form {
  display: flex;
  flex-direction: column;
  gap: 16px;
  transition: opacity 0.4s ease, transform 0.4s ease;
}
.auth-form.hidden { display: none; }

.auth-form input,
.auth-form select {
  width: 95%;
  padding: 12px 8px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 15px;
  transition: border-color 0.3s, box-shadow 0.3s;
}
.auth-form input:focus,
.auth-form select:focus {
  border-color: #316600;
  box-shadow: 0 0 6px rgba(49, 102, 0, 0.3);
  outline: none;
}

/* Password toggle */
.pw-toggle {
  position: relative;
}
.pw-toggle span {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: #316600;
  cursor: pointer;
  font-weight: 600;
  font-size: 13px;
  user-select: none;
}

/* Submit button */
button[type="submit"] {
  width: 100%;
  background: #316600;
  color: #fff;
  font-weight: bold;
  border: none;
  border-radius: 8px;
  padding: 12px;
  font-size: 16px;
  cursor: pointer;
  transition: 0.3s;
}
button[type="submit"]:hover {
  background: #274d00;
}

/* ===== TOAST (NOTIFICATION) ===== */
.toast {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: #316600;
  color: #fff;
  padding: 14px 20px;
  border-radius: 8px;
  font-size: 15px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  opacity: 0;
  transform: translateY(30px);
  pointer-events: none;
  transition: opacity 0.4s, transform 0.4s;
  z-index: 999;
}
.toast.show {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}
.toast.error { background: #b00020; }

@media(max-width:600px){
  .toast {
    bottom: auto;
    top: 20px;
    right: 50%;
    transform: translate(50%, -30px);
  }
  .toast.show {
    transform: translate(50%, 0);
  }
  .auth-container{
       margin: 60px 60px;
  }
}


</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">Student Info Board</div>
  <button id="menu-toggle" class="menu-toggle">â˜°</button>
  <div id="nav-links" class="nav-links">
    <a href="index.html">Home</a>
    <a href="student-login.html">Login</a>
  </div>
</nav>

<!-- AUTH CONTAINER -->
<div class="auth-container">
  <div class="auth-toggle">
    <button id="login-toggle" class="active">Login</button>
    <button id="signup-toggle">Sign Up</button>
  </div>

  <!-- LOGIN FORM -->
  <form id="login-form" class="auth-form">
    <input type="email" name="email" placeholder="Email" required>
    <div class="pw-toggle">
      <input type="password" name="password" placeholder="Password" required>
      <span id="login-pw-toggle">Show</span>
    </div>
    <button type="submit">Login</button>
  </form>

  <!-- SIGNUP FORM -->
  <form id="signup-form" class="auth-form hidden" method="POST" action="backend/signup.php">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="text" name="matric" placeholder="Matric Number (Optional)">
    <select name="role" required>
      <option value="">Select Role</option>
      <option value="student">Student</option>
      <option value="admin">Admin</option>
    </select>
    <div class="pw-toggle">
      <input type="password" name="password" placeholder="Password" required>
      <span id="signup-pw-toggle">Show</span>
    </div>
    <button type="submit">Sign Up</button>
  </form>
</div>

<!-- TOAST BOX -->
<div id="toast" class="toast"></div>

<!-- JS -->
<script>
document.addEventListener("DOMContentLoaded", ()=>{
  // ===== TOAST FUNCTION =====
  const toast=document.getElementById("toast");
  function showToast(message,type="success"){
    toast.textContent=message;
    toast.className="toast show";
    if(type==="error"){ toast.classList.add("error"); }
    else{ toast.classList.remove("error"); }
    setTimeout(()=>{ toast.classList.remove("show"); },3000);
  }

  // ===== TOGGLE FORMS =====
  const loginToggle=document.getElementById("login-toggle");
  const signupToggle=document.getElementById("signup-toggle");
  const loginForm=document.getElementById("login-form");
  const signupForm=document.getElementById("signup-form");

  loginToggle.addEventListener("click", ()=>{
    loginForm.classList.remove("hidden");
    signupForm.classList.add("hidden");
    loginToggle.classList.add("active");
    signupToggle.classList.remove("active");
  });
  signupToggle.addEventListener("click", ()=>{
    signupForm.classList.remove("hidden");
    loginForm.classList.add("hidden");
    signupToggle.classList.add("active");
    loginToggle.classList.remove("active");
  });

  // ===== PASSWORD TOGGLE =====
  function setupPwToggle(pwInputSelector, toggleSelector){
    const pwInput=document.querySelector(pwInputSelector);
    const toggle=document.querySelector(toggleSelector);
    toggle?.addEventListener("click", ()=>{
      if(pwInput.type==="password"){
        pwInput.type="text";
        toggle.textContent="Hide";
      } else {
        pwInput.type="password";
        toggle.textContent="Show";
      }
    });
  }
  setupPwToggle("#login-form input[name='password']", "#login-pw-toggle");
  setupPwToggle("#signup-form input[name='password']", "#signup-pw-toggle");

  // ===== HELPER: GET/SET USERS =====
  function getUsers(){
    return JSON.parse(localStorage.getItem("users") || "[]");
  }
  function saveUsers(users){
    localStorage.setItem("users", JSON.stringify(users));
  }

 // ===== SIGNUP =====
signupForm.addEventListener("submit", e=>{
  e.preventDefault();
  const name = signupForm.name.value.trim();
  const email = signupForm.email.value.trim();
  const matric = signupForm.matric.value.trim();
  const role = signupForm.role.value;
  const password = signupForm.password.value.trim();

  // Basic required fields check
  if (!name || !email || !role || !password) {
    return showToast("Please fill in all required fields.","error");
  }

  // Password strength check
  const strongPassword = /^(?=.*[0-9]).{8,}$/;
  if (!strongPassword.test(password)) {
    return showToast("Password must be at least 8 characters long and include a number.","error");
  }

  // Get stored users
  let users = getUsers();
  if (users.find(u => u.email === email)) {
    return showToast("Account already exists. Please log in.","error");
  }

  // Save new user
  users.push({ name, email, matric, role, password });
  saveUsers(users);
  showToast("Signup successful! Redirecting...");

  setTimeout(()=>{
    if(role === "student") window.location.href = "student-dashboard.html";
    else window.location.href = "admin-dashboard.html";
  },1500);
});


  // ===== LOGIN =====
  loginForm.addEventListener("submit", e=>{
    e.preventDefault();
    const email=loginForm.email.value.trim();
    const password=loginForm.password.value.trim();

    const users=getUsers();
    const user=users.find(u=>u.email===email && u.password===password);

    if(!user){
      return showToast("No account found. Please sign up first.","error");
    }

    localStorage.setItem("activeUser", JSON.stringify(user));
    showToast("Login successful! Redirecting...");

    setTimeout(()=>{
      if(user.role==="student") window.location.href="student-dashboard.html";
      else window.location.href="admin-dashboard.html";
    },1500);
  });
});
</script>

</body>
</html>
